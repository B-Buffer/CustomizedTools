<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.2.&nbsp;Thread Dump Parsing</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="TDA - Thread Dump Analyzer"><link rel="up" href="general.html" title="Chapter&nbsp;1.&nbsp;General"><link rel="prev" href="runtime.html" title="1.1.&nbsp;Request Thread Dumps"><link rel="next" href="regex.html" title="1.3.&nbsp;Regular Expression For Time Stamps"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="parsing"></a>1.2.&nbsp;Thread Dump Parsing</h2></div></div></div><p>
                Open the log file you want to analyse, TDA will search for all thread dumps in this log file and displays them in a tree. Up to Sun's JDK 1.5 the VM doesn't log any date information when the dump was requested, you can provide a regular expression in the <span class="emphasis"><em>Preferences</em></span> which is then used for parsing the lines before the thread dump to get a time stamp (see below for an example). In JDK 1.6 a time stamp is logged just before the dump, the default regular expression is set up to parse this time stamp. In <a href="analjconsole.html" title="Chapter&nbsp;3.&nbsp;Application Analysis using JConsole">Regular Expression For Time Stamps</a> you will find information about how to set up your own regular expression for time stamp parsing.
            </p><div class="figure"><a name="d0e83"></a><p class="title"><b>Figure&nbsp;1.2.&nbsp;Information about the selected dump</b></p><div class="figure-contents"><img src="info.png" alt="Information about the selected dump"></div></div><br class="figure-break"><p>
                For each thread dump TDA sums up all found threads and all monitors found in the threads, it also groups threads waiting on, for and locking monitors. Clicking on the dump nodes itself will provide you with information about the dump. If there is something special about it, TDA will give you some hints about what it found and what to do next.
            </p><div class="figure"><a name="d0e90"></a><p class="title"><b>Figure&nbsp;1.3.&nbsp;Thread Dump View</b></p><div class="figure-contents"><img src="threaddumps.png" alt="Thread Dump View"></div></div><br class="figure-break"><p>
                If you want to focus on a lock found in a thread you can just click on the monitor, TDA will then expand the <span class="emphasis"><em>Monitor</em></span> node of the thread dump and focuses the clicked monitor. It will also give you information about the monitor, if there is something special about, e.g. it has no obvious thread locking the monitor but others waiting for it.
            </p><p>
                Starting here you can easily see if a thread is hanging and holding a lock which a lot of other threads are waiting for. If there aren't any locking threads but only waiting threads it is very likely the garbage collector is locking the monitor currently. In this case you will get a hint telling you about this.
            </p><div class="figure"><a name="d0e102"></a><p class="title"><b>Figure&nbsp;1.4.&nbsp;Monitors used by threads</b></p><div class="figure-contents"><img src="monitor.png" alt="Monitors used by threads"></div></div><br class="figure-break"><p>
                If you added the -XX:+PrintClassHistogram to the VM-Parameters you will also see the class histogram for a thread dump, presented as node of the dump. Here you can examine all objects in the heap at the time of the thread dump. You can sort this view and filter it using the <span class="emphasis"><em>Filter Expression</em></span>.
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: IMPORTANT"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admon/note.png"></td><th align="left">IMPORTANT</th></tr><tr><td align="left" valign="top"><p>There is a bug in early 1.5.x releases preventing the class histogram to be printed if any other than the concurrent mark sweep garbage collector is used.
                    </p></td></tr></table></div><p>
                
            </p><div class="figure"><a name="d0e118"></a><p class="title"><b>Figure&nbsp;1.5.&nbsp;Class Histogram of selected dump</b></p><div class="figure-contents"><img src="histogram.png" alt="Class Histogram of selected dump"></div></div><p><br class="figure-break"> 
                If you use the loggc option with your VM to log the garbage collection information into a different log file, the class histogram will go into this log file instead of standard out and the TDA will not find it by default. To add the class histogram from a loggc file you need to use <span class="emphasis"><em>Open loggc file...</em></span> in the popup menu of the thread dump pane. TDA will then parse this file backward and adds the found class histograms to the thread dumps starting with the last dump. You can added multiple loggc-files, TDA will then continue after the last one where it added a class histogram with the last loggc-logfile or uses the dump you clicked on. 
            </p><p>
                If your log file contains a lot of thread dumps done during one session of the VM, you can use <span class="emphasis"><em>Find long running threads</em></span> in the tools menu to extract long running threads from the thread dumps. Currently this does also show waiting threads, so you need to search for threads actually doing something. Use appropriate filters to filter out all idle and uninteresting threads from the result.
            </p></div></body></html>
